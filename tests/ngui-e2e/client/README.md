# NGUI E2E Client

[![Module Category](https://img.shields.io/badge/Module%20Category-Testing/Evaluation-darkmagenta)](https://github.com/RedHat-UX/next-gen-ui-agent)
[![Module Status](https://img.shields.io/badge/Module%20Status-Tech%20Preview-orange)](https://github.com/RedHat-UX/next-gen-ui-agent)

This module is part of the [Next Gen UI Agent project](https://github.com/RedHat-UX/next-gen-ui-agent).

React frontend application for the NGUI end-to-end testing application. Demonstrates dynamic UI component rendering and provides a ChatBot interface for interacting with the AI-powered backend.

## Provides

* React-based frontend application
* Dynamic UI component rendering using NGUI components
* ChatBot interface for AI interaction
* Vite-based development environment
* Integration with NGUI `@rhngui/patternfly-react-renderer` package
* Error boundary handling for robust UI

## Installation

### Prerequisites

1. **Node.js** (version 18 or higher)
2. **npm** or **yarn** package manager

### Install Dependencies

```bash
cd tests/ngui-e2e/client
npm install
```

## Configuration

The client is configured to connect to the backend server running on `localhost:8000`. This can be modified in the API configuration if needed.

### Vite Configuration

The application uses Vite for development and building. Configuration is in `vite.config.ts`:

- Development server runs on port `5173`
- Proxy configuration for API calls to backend
- TypeScript support enabled

## Running

### Development Mode

```bash
cd tests/ngui-e2e/client
npm run dev
```

The application will be available at [http://localhost:5173](http://localhost:5173)

### Build for Production

```bash
npm run build
```

Built files will be available in the `dist/` directory.

## Debug Mode

Debug mode provides additional developer tools and testing capabilities for working with the NGUI agent.

### Enabling Debug Mode

Add the `?debug=true` URL parameter to enable debug mode:

```
http://localhost:5173/?debug=true
```

### Debug Mode Features

When debug mode is enabled, you get access to:

- **Test Panel**: A resizable left sidebar with testing tools
- **Mock Mode**: Test UI components with predefined mock data without connecting to the backend
- **Quick Prompts**: Pre-configured prompts for rapid testing
- **JSON Viewer**: "View component JSON" button to inspect the raw component configuration
- **Custom JSON**: Ability to send custom JSON configurations directly to test specific scenarios

## Application Structure

```
src/
├── components/
│   ├── ChatBot.tsx          # Main chat interface component
│   ├── DynamicComponent.tsx # Dynamic UI component renderer
│   └── ErrorBoundary.tsx    # Error handling component
├── hooks/
│   └── useFetch.tsx         # Custom hook for API calls
├── App.tsx                  # Main application component
└── main.tsx                 # Application entry point
```

## Features

- **Dynamic Component Rendering**: Renders UI components generated by the AI backend
- **Chat Interface**: Interactive chat interface for testing AI responses
- **Error Handling**: Robust error boundary for graceful error handling
- **Responsive Design**: Modern UI with responsive design patterns

## Troubleshooting

### Common Issues

**1. Module Not Found: "@rhngui/patternfly-react-renderer"**
- **Cause**: The package is not installed or linked properly
- **Solution**: Run `npm install`. For local development with linked packages, see [DEVELOPMENT.md](./DEVELOPMENT.md)

**2. API Connection Errors**
- **Cause**: Backend server is not running or not accessible
- **Solution**: Ensure the backend server is running on `localhost:8000`

**3. Port Conflicts**
- **Frontend runs on**: `localhost:5173` (default Vite dev server)
- **Backend runs on**: `localhost:8000`

### Verification Steps

```bash
# Check if frontend is running
curl -I http://localhost:5173

# Check if backend is accessible from frontend
curl -I http://localhost:8000/docs
```

## Development

### Available Scripts

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm run preview` - Preview production build
- `npm run lint` - Run ESLint

### Dependencies

- **React** - UI framework
- **Vite** - Build tool and dev server
- **TypeScript** - Type safety
- **@rhngui/patternfly-react-renderer** - NGUI React components package
- **@patternfly/chatbot** - PatternFly ChatBot components

## Links

* [Documentation](https://redhat-ux.github.io/next-gen-ui-agent/)
* [Source Codes](https://github.com/RedHat-UX/next-gen-ui-agent/tree/main/tests/ngui-e2e/client)
* [Contributing](https://redhat-ux.github.io/next-gen-ui-agent/development/contributing/)
