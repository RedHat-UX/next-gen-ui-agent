---
stages:
  - build
  - deploy-preview
  - deploy-qa
  - deploy-stage
  - deploy-prod
  - clean

variables:
  LIGHTRAIL_VERSION: &LIGHTRAIL_VERSION 1.5.0
  LIGHTRAIL_RELEASE_BRANCH: main

include:
  - project: dxp/platforms-pipelines/lightrail-platform/lightrail
    ref: *LIGHTRAIL_VERSION
    file:
      - pipeline/global.yaml
      - pipeline/stages/build/build.yaml
      - pipeline/stages/deploy/deploy.yaml
      - pipeline/stages/clean/clean.yaml

# Disable prod environment deployment.
deploy-prod:
  rules:
    - when: never